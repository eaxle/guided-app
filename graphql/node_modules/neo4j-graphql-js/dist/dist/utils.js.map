{"version":3,"sources":["../utils.js"],"names":["Object","defineProperty","exports","value","relationDirective","cypherDirective","undefined","_defineProperty2","require","_defineProperty3","_interopRequireDefault","_toConsumableArray2","_toConsumableArray3","_assign","_assign2","_stringify","_stringify2","parseArgs","cypherDirectiveArgs","isMutation","isAddRelationshipMutation","typeIdentifiers","isGraphqlScalarType","isArrayType","lowFirstLetter","innerType","innerFilterParams","extractQueryResult","computeSkipLimit","extractSelections","obj","__esModule","default","args","variableValues","length","reduce","acc","arg","kind","name","parseInt","parseFloat","getDefaultArguments","fieldName","schemaType","_fields","defaultValue","err","variable","headSelection","resolveInfo","defaultArgs","queryArgs","arguments","replace","substring","operation","startsWith","returnType","typeName","toString","variableName","type","constructor","word","charAt","toLowerCase","slice","ofType","directiveWithArgs","directiveName","fieldDirective","getFields","astNode","directives","find","e","directiveArgument","directive","ret","apply","concat","map","key","selections","queryParams","filters","filter","x","filterValue","join","argumentValue","selection","a","_ref2","records","_typeIdentifiers","record","get","first","offset","fragments","cur","selectionSet"],"mappings":"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","file":"utils.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.relationDirective = exports.cypherDirective = undefined;\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _assign = require('babel-runtime/core-js/object/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nexports.parseArgs = parseArgs;\nexports.cypherDirectiveArgs = cypherDirectiveArgs;\nexports.isMutation = isMutation;\nexports.isAddRelationshipMutation = isAddRelationshipMutation;\nexports.typeIdentifiers = typeIdentifiers;\nexports.isGraphqlScalarType = isGraphqlScalarType;\nexports.isArrayType = isArrayType;\nexports.lowFirstLetter = lowFirstLetter;\nexports.innerType = innerType;\nexports.innerFilterParams = innerFilterParams;\nexports.extractQueryResult = extractQueryResult;\nexports.computeSkipLimit = computeSkipLimit;\nexports.extractSelections = extractSelections;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction parseArgs(args, variableValues) {\n  // get args from selection.arguments object\n  // or from resolveInfo.variableValues if arg is a variable\n  // note that variable values override default values\n\n  if (!args) {\n    return {};\n  }\n\n  if (args.length === 0) {\n    return {};\n  }\n\n  return args.reduce(function (acc, arg) {\n    switch (arg.value.kind) {\n      case 'IntValue':\n        acc[arg.name.value] = parseInt(arg.value.value);\n        break;\n      case 'FloatValue':\n        acc[arg.name.value] = parseFloat(arg.value.value);\n        break;\n      case 'Variable':\n        acc[arg.name.value] = variableValues[arg.name.value];\n        break;\n      default:\n        acc[arg.name.value] = arg.value.value;\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction getDefaultArguments(fieldName, schemaType) {\n  // get default arguments for this field from schema\n\n  try {\n    return schemaType._fields[fieldName].args.reduce(function (acc, arg) {\n      acc[arg.name] = arg.defaultValue;\n      return acc;\n    }, {});\n  } catch (err) {\n    return {};\n  }\n}\n\nfunction cypherDirectiveArgs(variable, headSelection, schemaType, resolveInfo) {\n  var defaultArgs = getDefaultArguments(headSelection.name.value, schemaType);\n  var queryArgs = parseArgs(headSelection.arguments, resolveInfo.variableValues);\n\n  var args = (0, _stringify2.default)((0, _assign2.default)(defaultArgs, queryArgs)).replace(/\\\"([^(\\\")\"]+)\\\":/g, ' $1: ');\n\n  return args === '{}' ? '{this: ' + variable + args.substring(1) : '{this: ' + variable + ',' + args.substring(1);\n}\n\nfunction isMutation(resolveInfo) {\n  return resolveInfo.operation.operation === 'mutation';\n}\n\nfunction isAddRelationshipMutation(resolveInfo) {\n  return resolveInfo.operation.operation === 'mutation' && (resolveInfo.fieldName.startsWith('Add') || resolveInfo.fieldName.startsWith('add'));\n}\n\nfunction typeIdentifiers(returnType) {\n  var typeName = innerType(returnType).toString();\n  return {\n    variableName: lowFirstLetter(typeName),\n    typeName: typeName\n  };\n}\n\nfunction isGraphqlScalarType(type) {\n  return type.constructor.name === 'GraphQLScalarType' || type.constructor.name === 'GraphQLEnumType';\n}\n\nfunction isArrayType(type) {\n  return type.toString().startsWith('[');\n}\n\nfunction lowFirstLetter(word) {\n  return word.charAt(0).toLowerCase() + word.slice(1);\n}\n\nfunction innerType(type) {\n  return type.ofType ? innerType(type.ofType) : type;\n}\n\n// handles field level schema directives\n// TODO: refactor to handle Query/Mutation type schema directives\nvar directiveWithArgs = function directiveWithArgs(directiveName, args) {\n  return function (schemaType, fieldName) {\n    function fieldDirective(schemaType, fieldName, directiveName) {\n      return schemaType.getFields()[fieldName].astNode.directives.find(function (e) {\n        return e.name.value === directiveName;\n      });\n    }\n\n    function directiveArgument(directive, name) {\n      return directive.arguments.find(function (e) {\n        return e.name.value === name;\n      }).value.value;\n    }\n\n    var directive = fieldDirective(schemaType, fieldName, directiveName);\n    var ret = {};\n    if (directive) {\n      _assign2.default.apply(Object, [ret].concat((0, _toConsumableArray3.default)(args.map(function (key) {\n        return (0, _defineProperty3.default)({}, key, directiveArgument(directive, key));\n      }))));\n    }\n    return ret;\n  };\n};\n\nvar cypherDirective = exports.cypherDirective = directiveWithArgs('cypher', ['statement']);\nvar relationDirective = exports.relationDirective = directiveWithArgs('relation', ['name', 'direction']);\n\nfunction innerFilterParams(selections) {\n  var queryParams = '';\n\n  if (selections && selections.length && selections[0].arguments && selections[0].arguments.length) {\n    var filters = selections[0].arguments.filter(function (x) {\n      return x.name.value !== 'first' && x.name.value !== 'offset';\n    }).map(function (x) {\n      var filterValue = (0, _stringify2.default)(x.value.value).replace(/\\\"([^(\\\")\"]+)\\\":/g, '$1:'); // FIXME: support IN for multiple values -> WHERE\n      return x.name.value + ': ' + filterValue;\n    });\n\n    queryParams = '{' + filters.join(',') + '}';\n  }\n  return queryParams;\n}\n\nfunction argumentValue(selection, name, variableValues) {\n  var arg = selection.arguments.find(function (a) {\n    return a.name.value === name;\n  });\n  if (!arg) {\n    return null;\n  } else if (!arg.value.value && name in variableValues && arg.value.kind === 'Variable') {\n    return variableValues[name];\n  } else {\n    return arg.value.value;\n  }\n}\n\nfunction extractQueryResult(_ref2, returnType) {\n  var records = _ref2.records;\n\n  var _typeIdentifiers = typeIdentifiers(returnType),\n      variableName = _typeIdentifiers.variableName;\n\n  return isArrayType(returnType) ? records.map(function (record) {\n    return record.get(variableName);\n  }) : records.length ? records[0].get(variableName) : null;\n}\n\nfunction computeSkipLimit(selection, variableValues) {\n  var first = argumentValue(selection, 'first', variableValues);\n  var offset = argumentValue(selection, 'offset', variableValues);\n\n  if (first === null && offset === null) return '';\n  if (offset === null) return '[..' + first + ']';\n  if (first === null) return '[' + offset + '..]';\n  return '[' + offset + '..' + (parseInt(offset) + parseInt(first)) + ']';\n}\n\nfunction extractSelections(selections, fragments) {\n  // extract any fragment selection sets into a single array of selections\n  return selections.reduce(function (acc, cur) {\n    if (cur.kind === 'FragmentSpread') {\n      return [].concat((0, _toConsumableArray3.default)(acc), (0, _toConsumableArray3.default)(fragments[cur.name.value].selectionSet.selections));\n    } else {\n      return [].concat((0, _toConsumableArray3.default)(acc), [cur]);\n    }\n  }, []);\n}"]}